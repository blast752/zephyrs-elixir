<UserControl x:Class="ZephyrsElixir.UI.Shell.Sidebar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:h="clr-namespace:ZephyrsElixir.UI.Helpers"
             xmlns:loc="clr-namespace:ZephyrsElixir.Localization"
             mc:Ignorable="d"
             d:DesignWidth="280" d:DesignHeight="900"
             MinWidth="280" Width="280"
             Background="{x:Null}"
             DataContext="{Binding RelativeSource={RelativeSource Self}}">
             
    <UserControl.Resources>
        <h:BatteryLevelToBrushConverter x:Key="BatteryBrush"/>
        <x:Static Member="h:StringEqualityToBoolConverter.Instance" x:Key="StringEq"/>
    </UserControl.Resources>

    <Border Background="{StaticResource Sidebar.Brush.Background}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="18,18,18,8">
                <Grid Height="150">
                    <Ellipse Width="150" Height="150">
                        <Ellipse.Fill>
                            <RadialGradientBrush GradientOrigin="0.5,0.45" Center="0.5,0.5" RadiusX="0.6" RadiusY="0.6">
                                <GradientStop Color="#30FFFFFF" Offset="0"/>
                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Image Width="140" Height="140"
                           Source="pack://application:,,,/Assets/Images/logo.png"
                           RenderOptions.BitmapScalingMode="HighQuality"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center"/>
                </Grid>

                <TextBlock Text="{Binding [Sidebar_Title], Source={x:Static loc:TranslationManager.Instance}}" 
                           Style="{StaticResource Sidebar.Style.Title}"/>
                <TextBlock Text="{Binding [Sidebar_Subtitle], Source={x:Static loc:TranslationManager.Instance}}" 
                           Style="{StaticResource Sidebar.Style.Subtitle}"/>
            </StackPanel>

            <StackPanel Grid.Row="1" Margin="18,0">
                <ToggleButton x:Name="BtnHome" 
                              Style="{StaticResource App.Style.ToggleButton}" 
                              Tag="&#xE80F;"
                              Content="{Binding [Sidebar_Nav_Home], Source={x:Static loc:TranslationManager.Instance}}" 
                              IsChecked="{Binding SelectedKey, Converter={StaticResource StringEq}, ConverterParameter=Home}"
                              Click="OnNavigationClick"/>
                <ToggleButton x:Name="BtnOptimize" 
                              Style="{StaticResource App.Style.ToggleButton}" 
                              Tag="&#xE777;"
                              Content="{Binding [Sidebar_Nav_Optimize], Source={x:Static loc:TranslationManager.Instance}}" 
                              IsChecked="{Binding SelectedKey, Converter={StaticResource StringEq}, ConverterParameter=Optimize}"
                              Click="OnNavigationClick"/>
                <ToggleButton x:Name="BtnDebloat" 
                              Style="{StaticResource App.Style.ToggleButton}" 
                              Tag="&#xE74D;"
                              Content="{Binding [Sidebar_Nav_Debloat], Source={x:Static loc:TranslationManager.Instance}}" 
                              IsChecked="{Binding SelectedKey, Converter={StaticResource StringEq}, ConverterParameter=Debloat}"
                              Click="OnNavigationClick"/>
                <ToggleButton x:Name="BtnTools" 
                              Style="{StaticResource App.Style.ToggleButton}" 
                              Tag="&#xE74C;"
                              Content="{Binding [Sidebar_Nav_Tools], Source={x:Static loc:TranslationManager.Instance}}" 
                              IsChecked="{Binding SelectedKey, Converter={StaticResource StringEq}, ConverterParameter=Tools}"
                              Click="OnNavigationClick"/>
                <ToggleButton x:Name="BtnAdvanced" 
                              Style="{StaticResource App.Style.ToggleButton}" 
                              Tag="&#xE74D;"
                              Content="{Binding [Sidebar_Nav_Advanced], Source={x:Static loc:TranslationManager.Instance}}" 
                              IsChecked="{Binding SelectedKey, Converter={StaticResource StringEq}, ConverterParameter=Advanced}"
                              Click="OnNavigationClick"/>
                <ToggleButton x:Name="BtnSettings" 
                              Style="{StaticResource App.Style.ToggleButton}" 
                              Tag="&#xE713;"
                              Content="{Binding [Sidebar_Nav_Settings], Source={x:Static loc:TranslationManager.Instance}}" 
                              IsChecked="{Binding SelectedKey, Converter={StaticResource StringEq}, ConverterParameter=Settings}"
                              Click="OnNavigationClick"/>
                <ToggleButton x:Name="BtnHelp" 
                              Style="{StaticResource App.Style.ToggleButton}" 
                              Tag="&#xE897;"
                              Content="{Binding [Sidebar_Nav_Help], Source={x:Static loc:TranslationManager.Instance}}" 
                              IsChecked="{Binding SelectedKey, Converter={StaticResource StringEq}, ConverterParameter=Help}"
                              Click="OnNavigationClick"/>
            </StackPanel>
            
            <Border Grid.Row="2" Style="{StaticResource Sidebar.Style.DevicePanel}">
                <StackPanel Orientation="Horizontal" 
                            VerticalAlignment="Center" 
                            HorizontalAlignment="Center">
                    <TextBlock Text="{Binding DeviceStatusText}" 
                               Style="{StaticResource Sidebar.Style.DeviceText}"/>
                    
                    <Canvas Width="54" Height="24" Margin="10,0,0,0">
                        <Border Canvas.Left="0" Canvas.Top="2"
                                Width="50" Height="20" 
                                BorderThickness="2" 
                                BorderBrush="White" 
                                CornerRadius="4" 
                                Background="#33000000">
                            <Grid Margin="2">
                                <Rectangle RadiusX="2" RadiusY="2"
                                           Fill="{Binding DeviceBattery, Converter={StaticResource BatteryBrush}}">
                                    <Rectangle.RenderTransform>
                                        <ScaleTransform ScaleX="{Binding DeviceBattery, Converter={StaticResource App.Converter.PercentageToScale}}"
                                                       ScaleY="1"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                            </Grid>
                        </Border>
                        <Border Canvas.Left="51" Canvas.Top="7"
                                Width="4" Height="10" 
                                Background="White" 
                                CornerRadius="0,2,2,0"/>
                    </Canvas>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</UserControl>